(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("express");var n=e.n(t);const r=require("cors");var a=e.n(r);const o=require("react-dom/server"),l=require("react");var c=e.n(l);const i=require("isomorphic-fetch");var u=e.n(i);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=encodeURI("https://api.github.com/search/repositories?q=stars:>1+language:".concat(e,"&sort=stars&order=desc&type=Repositories"));return u()(t).then((function(e){return e.json()})).then((function(e){return e.items})).catch((function(e){return console.warn(e),null}))}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const f=[{path:"/",exact:!0,component:function(){return c().createElement("div",null,"Home")}},{path:"/popular/:id",component:function(e){console.log(e),console.log(e.match.params),console.log(e.match.params.id);var t=m((0,l.useState)(e.staticContext.data),2),n=t[0],r=t[1],a=m((0,l.useState)(!1),2),o=a[0],i=a[1],u=(0,l.useRef)(!0);return(0,l.useEffect)((function(){u.current||!n?(u.current=!0,i(!0),s(e.match.params.id||"").then((function(e){i(!1),r(e)})).catch((function(){i(!1)}))):u.current=!0}),[e.match.params.id]),o?"Loading...":n?c().createElement("ul",{style:{display:"flex",flexWrap:"wrap"}},n.map((function(e){var t=e.name,n=e.owner,r=e.stargazers_count,a=e.html_url;return c().createElement("li",{key:t,style:{margin:30}},c().createElement("ul",null,c().createElement("li",null,c().createElement("a",{href:a},t)),c().createElement("li",null,"@",n.login),c().createElement("li",null,r," stars")))}))):null},fetchInitialData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s(e.split("/").pop())}}],h=require("react-router-dom");function d(){return c().createElement("ul",null,[{name:"All",param:"all"},{name:"JavaScript",param:"javascript"},{name:"Ruby",param:"ruby"},{name:"Python",param:"python"},{name:"Java",param:"java"}].map((function(e){var t=e.name,n=e.param;return c().createElement("li",{key:n},c().createElement(h.NavLink,{activeStyle:{fontWeight:"bold"},to:"/popular/".concat(n)},t))})))}function v(){return c().createElement("div",null,"Four Oh Four")}var y=["path","exact","component"];function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}const b=function(){return c().createElement("div",null,c().createElement(d,null),c().createElement(h.Switch,null,f.map((function(e){var t=e.path,n=e.exact,r=e.component,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,y);return c().createElement(h.Route,{key:t,path:t,exact:n,render:function(e){return c().createElement(r,g({},e,a))}})})),c().createElement(h.Route,{render:function(e){return c().createElement(v,e)}})))},E=require("serialize-javascript");var O=e.n(E),j=n()();j.use(a()()),j.use(n().static("public")),j.get("*",(function(e,t,n){var r=f.find((function(t){return(0,h.matchPath)(e.url,t)}))||{};(r.fetchInitialData?r.fetchInitialData(e.path):Promise.resolve()).then((function(n){var r=(0,o.renderToString)(c().createElement(h.StaticRouter,{location:e.url,context:{data:n}},c().createElement(b,null)));t.send('\n            <!DOCTYPE html>\n            <html>\n                <head>\n                    <title>SSR with React</title>\n                    <script src="/bundle.js" defer><\/script>\n                    <script>\n                        window.__INITIAL_DATA__ = '.concat(O()(n),';\n                    <\/script>\n                </head>\n\n                <body>\n                    <div id="root">').concat(r,"</div>\n                </body>\n            </html> \n        "))})).catch(n)})),j.listen(3e3,(function(){console.log("server is listeing on port: 3000")}))})();